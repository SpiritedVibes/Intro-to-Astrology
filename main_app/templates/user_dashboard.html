{% extends "base.html" %}

{% load static %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">

{% block content %}
<div class="dashboard-container">
    <h1>{{ request.user.username }}'s Quiz Dashboard</h1>

    <div class="user-profile">
        <h2>Welcome, {{ user.username }}</h2>
        <p>Astrology Sign: {{ user_profile.astrology_sign }}</p>
        <p>Today's Horoscope: {{ user_profile.daily_horoscope }}</p>
        <p>Birth Date: {% if user_profile.birth_date %}{{ user_profile.birth_date|date:"F j, Y" }}{% else %}Not set{% endif %}</p>
        
        <a href="{% url 'update_profile' %}" class="btn">Update Profile</a>
    </div>

    {% if user_results %}
        <table class="results-table">
            <thead>
                <tr>
                    <th>Quiz Title</th>
                    <th>Score</th>
                    <th>Date Taken</th>
                </tr>
            </thead>
            <tbody>
                {% for result in user_results %}
                <tr>
                    <td>{{ result.quiz.title }}</td>
                    <td>{{ result.score }}</td>
                    <td>{{ result.created_at|date:"F j, Y, g:i a" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>You have not taken any quizzes yet.</p>
    {% endif %}

    <a href="{% url 'quiz_list' %}" class="btn">Take a Quiz</a>
</div>
{% endblock %}
